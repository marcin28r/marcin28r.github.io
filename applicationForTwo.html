<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="Ring.js"></script> 
  <script src="RingStack.js"></script> 
  <script src="Buffer.js"></script> 
  <script src="Node.js"></script> 
  <script src="Hanoi.js"></script> 
  <link rel="stylesheet" href="style.css">
  <title>Wieża Hanoi</title>
</head>
<body>
  <div  id="toto">
 <div class="gui" id="top">
        <div class="info" id="top_menu" >
        <label for="stackHeight">Liczba pierścieni do ułożenia :</label>
        <input type="number" id="stackHeight" min="1" max="8" value="4">
        <button id="startButton">Start</button>   
        <form id="optionsForm">
          <label>
            <a>Patern:</a>
          </label>
          <br>
          <label >
              <input type="radio" name="patern" value="color">
              kolory
          </label>
          <label>
              <input type="radio" name="patern" value="contrast">
              wysoki kontrast
          </label>
          <label>
              <input type="radio" name="patern" value="wood">
              klasyczne drewniane
          </label>
          <br>
          <label>
            <a>Ułatwienia :</a>
          </label>
          <br>
          <label>
              <input type="checkbox" id="help_move">
              pojedyńcza podpowiedź
          </label>
          <br>
          <label>
            <input type="checkbox" id="can_be_added">
            wskazywanie gdzie możemy odłożyć krążek
        </label>
        <br>
        <label>
          <input type="checkbox" id="auto_move">
          automatyczne układanie 
        </label>
        <br>
        <label>
          <input type="checkbox" id="map">
          mapa ruchów 
      </label>
      </form>
        </div>
      </div>
      
      <div class="row_container">
        <div id ="h1"></div>
        <div id ="h2"></div>
      </div>
    
  </div>
  </div>
     

  <script>

    let actual_node = Node;
    let auto_move = false;

    const h1 = new Hanoi(document.getElementById('h1'));
    const h2 = new Hanoi(document.getElementById('h2'));

    let count = 0;
    let back = []

    function increaseCount() {
      count++;
      document.getElementById('counter').textContent = count;
    }

    let timerInterval;
    let secondsElapsed = 0;

    function startTimer() {
      timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      secondsElapsed++;
      document.getElementById('timer').textContent = formatTime(secondsElapsed);
    }

    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
    }

    let height;
    document.getElementById('startButton').addEventListener('click', function() {
      const form = document.getElementById('optionsForm');
      const selected_patern = form.elements['patern'].value;

      var color = selected_patern == "color" ? true : false;
      var wood = selected_patern == "wood" ? true : false;
      var help_move = document.getElementById('help_move').checked ? true : false;
      var can_be_added = document.getElementById('can_be_added').checked ? true : false;
      var auto_move = document.getElementById('auto_move').checked ? true : false;
      var map = document.getElementById('map').checked ? true : false;

      h1.build(selected_patern, help_move, can_be_added, auto_move, map);
      h1.fill();
      h1.divA.addEventListener('click', function(){h1.stackClick(h1.A, h1.divBufforA)});
      h1.divB.addEventListener('click', function(){h1.stackClick(h1.B, h1.divBufforB)});
      h1.divC.addEventListener('click', function(){h1.stackClick(h1.C, h1.divBufforC)});


      h2.build(selected_patern, help_move, can_be_added, auto_move, map);
      h2.fill();
      h2.divA.addEventListener('click', function(){h2.stackClick(h2.A, h2.divBufforA)});
      h2.divB.addEventListener('click', function(){h2.stackClick(h2.B, h2.divBufforB)});
      h2.divC.addEventListener('click', function(){h2.stackClick(h2.C, h2.divBufforC)});

      document.getElementById("toto").removeChild(document.getElementById("top"));
    });


  </script>
</body>
</html>
